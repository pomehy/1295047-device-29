const mapLink=document.querySelector(".contacts__map"),mapModal=document.querySelector(".map-modal"),mapModalClose=document.querySelector(".map-modal--close"),writeUsLink=document.querySelector(".contacts__link"),writeUsModal=document.querySelector(".write-us"),writeUsClose=document.querySelector(".write-us--close"),userName=writeUsModal.querySelector("[name=user-name]"),userEmail=writeUsModal.querySelector("[name=user-email]"),userText=writeUsModal.querySelector("[name=user-text]"),writeUsForm=writeUsModal.querySelector("form"),storageUserName=localStorage.getItem("user-name"),isStorageSupport=!0;let storage="",promoSliderItems=document.querySelectorAll(".slider__item"),promoSliderButtons=document.querySelectorAll(".slider__button"),serviceSliderItems=document.querySelectorAll(".service-slider__item"),serviceItem=document.querySelectorAll(".service__item"),serviceLinks=document.querySelectorAll(".service__button"),slideControls=document.querySelector(".slider__controls"),sliderAdvControls=document.querySelector(".service__list");mapLink.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.add("modal-show")}),mapModalClose.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("modal-show")});try{storage=localStorage.getItem("user-name")}catch(e){isStorageSupport=!1}writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.add("modal-show"),storageUserName?(userName.value=storageUserName,userEmail.focus()):userName.focus()}),writeUsClose.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")}),writeUsForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?isStorageSupport&&localStorage.setItem("user-name",userName.value):(e.preventDefault(),writeUsModal.classList.remove("modal-error"),writeUsModal.offsetWidth=writeUsModal.offsetWidth,writeUsModal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(mapModal.classList.contains("modal-show")?(e.preventDefault(),mapModal.classList.remove("modal-show")):writeUsModal.classList.contains("modal-show")&&(e.preventDefault(),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")))}),slideControls.addEventListener("click",function(e){if(e.target.classList.contains("slider__button")){let t=Array.from(promoSliderButtons),s=e.target,r=t.indexOf(s);t.forEach(function(e,t,s){t===r?(e.classList.add("slider__button--active"),promoSliderItems[t].classList.add("slider__item--active")):(e.classList.remove("slider__button--active"),promoSliderItems[t].classList.remove("slider__item--active"))})}}),sliderAdvControls.addEventListener("click",function(e){if(e.target.classList.contains("service__button")){event.preventDefault();let t=Array.from(serviceLinks),s=Array.from(serviceItem),r=e.target,o=t.indexOf(r);s.forEach(function(e,t,s){t===o?(e.classList.add("service__item--active"),serviceSliderItems[t].classList.add("service-slider__item--active")):(e.classList.remove("service__item--active"),serviceSliderItems[t].classList.remove("service-slider__item--active"))})}});
