const mapLink=document.querySelector(".contacts__map"),mapModal=document.querySelector(".map-modal"),mapModalClose=document.querySelector(".map-modal--close"),writeUsLink=document.querySelector(".contacts__link"),writeUsModal=document.querySelector(".write-us"),writeUsClose=document.querySelector(".write-us--close"),userName=writeUsModal.querySelector("[name=user-name]"),userEmail=writeUsModal.querySelector("[name=user-email]"),userText=writeUsModal.querySelector("[name=user-text]"),writeUsForm=writeUsModal.querySelector("form"),storageUserName=localStorage.getItem("user-name"),isStorageSupport=!0;let storage="";mapLink.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.add("modal-show")}),mapModalClose.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("modal-show")});try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.add("modal-show"),storageUserName?(userName.value=storageUserName,userEmail.focus()):userName.focus()}),writeUsClose.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")}),writeUsForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?isStorageSupport&&localStorage.setItem("user-name",userName.value):(e.preventDefault(),writeUsModal.classList.remove("modal-error"),writeUsModal.offsetWidth=writeUsModal.offsetWidth,writeUsModal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(mapModal.classList.contains("modal-show")?(e.preventDefault(),mapModal.classList.remove("modal-show")):writeUsModal.classList.contains("modal-show")&&(e.preventDefault(),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")))});
